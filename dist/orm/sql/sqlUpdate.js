'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _sqlWhere=require('./sqlWhere'),_sqlWhere2=_interopRequireDefault(_sqlWhere),_sqlUtils=require('./sqlUtils');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getListReturning=function getListReturning(_ref){var a=_ref.fields;return Object.keys(a).join(', ')},filterData=function filterData(a,b){var c=a[b];return c!==void 0},getListValues=function getListValues(_ref2){var a=_ref2.select,b=_ref2.data;return Object.keys(b).filter(filterData.bind(void 0,b)).map(function(c){var d=b[c];if(null===d)return c+' = null';var e=(0,_sqlUtils.fieldIsString)(a,c);return e?c+' = \''+(d+'').replace('\'','\\\'')+'\'':c+' = '+d}).join(','+_sqlUtils.breakLine+'      ')},toSQL=function toSQL(_ref3){var a=_ref3.table,b=_ref3.setters,c=_ref3.conditional,d=_ref3.listReturning;return('\nUPDATE '+a+'\n  SET '+b+'\n  '+c+'\n  RETURNING '+d+';\n').trim()};exports.default=function(_ref4){var a=_ref4.table,b=_ref4.fields,c=_ref4.data,d=_ref4.where,e=(0,_sqlUtils.objToListFields)({fields:b}),f=getListValues({select:e,data:c}),g=getListReturning({fields:b}),h=(0,_sqlWhere2.default)({select:e,where:d,table:a});return toSQL({table:a,setters:f,conditional:h,listReturning:g})};