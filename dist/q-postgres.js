module.exports=function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(24),a=n(20),i=r(a),o=n(12),d=r(o);t["default"]=function(e){var t=new u.Pool(e),n=d["default"].bind(void 0,t);return{connect:n,orm:i["default"]}}},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.TEXT="TEXT",r=t.NAME="VARCHAR(255)",u=t.DATE="DATE",a=t.CHAR1="CHAR(1)",i=t.CHAR2="CHAR(2)",o=t.CHAR8="CHAR(8)",d=t.EMAIL="VARCHAR(50)",f=t.PHONE="VARCHAR(30)",s=t.MONEY="NUMERIC(15,2)",l=t.STRING="VARCHAR(255)",c=t.SELECT="VARCHAR(25)",p=t.BOOLEAN="BOOLEAN",v=t.INTEGER="INTEGER",b=t.CPFCNPJ="VARCHAR(14)",E=t.PERCENT="NUMERIC(15,8)",m=t.PRIMARY="SERIAL PRIMARY KEY",T=t.DATETIME="TIMESTAMP",N=t.REFERENCES="REFERENCES",R=t.NOT_NULL="NOT NULL";t["default"]={TEXT:n,DATE:u,NAME:r,CHAR1:a,CHAR2:i,CHAR8:o,EMAIL:d,PHONE:f,MONEY:s,STRING:l,SELECT:c,BOOLEAN:p,INTEGER:v,CPFCNPJ:b,PERCENT:E,PRIMARY:m,DATETIME:T,REFERENCES:N,NOT_NULL:R}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={eq:"=",lt:"<",gt:">",lq:"<=",gq:">=",df:"<>",lk:"like","==":"=","<<":"<",">>":">","<=":"<=",">=":">=","<>":"<>","%%":"like"};t["default"]=function(e){var t=n.eq;if("string"!=typeof e)return{comparator:t,value:e};var r=e.split(":"),u=r.shift();if(!n.hasOwnProperty(u))return{comparator:t,value:e};t=n[u];var a=r.join(":").trim();return{comparator:t,value:"like"===t?"%"+a+"%":a}}},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectTable=t.deleteTable=t.updateTable=t.insertTable=t.createTable=t.alterTable=t.dropTable=t.types=void 0;var u=n(2),a=r(u),i=n(16),o=r(i),d=n(13),f=r(d),s=n(14),l=r(s),c=n(17),p=r(c),v=n(19),b=r(v),E=n(15),m=r(E),T=n(18),N=r(T),R=t.types=a["default"],h=t.dropTable=o["default"],A=t.alterTable=f["default"],O=t.createTable=l["default"],_=t.insertTable=p["default"],x=t.updateTable=b["default"],L=t.deleteTable=m["default"],C=t.selectTable=N["default"];t["default"]={types:R,dropTable:h,alterTable:A,createTable:O,insertTable:_,updateTable:x,deleteTable:L,selectTable:C}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),a=r(u),i=n(4),o=r(i),d=n(1),f=r(d),s=n(6);t["default"]=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];r&&r.length||(r=(0,f["default"])(t.fields));var i=(0,s.selectTable)();return i.from(t.table),r.forEach(function(e){return i.field(e)}),i.run=(0,o["default"])(a["default"].mark(function d(){var t,n;return a["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=i.values,n=i.toSQL(),r.abrupt("return",e.execute(n,t));case 3:case"end":return r.stop()}},d,void 0)})),i}},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("babel-runtime/helpers/defineProperty")},function(e,t){e.exports=require("babel-runtime/helpers/typeof")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(9),a=r(u),i=n(5),o=r(i),d=n(4),f=r(d),s="BEGIN",l="COMMIT",c="ROLLBACK",p=function(){var e=(0,f["default"])(o["default"].mark(function t(e){var n,r;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connect();case 2:if(n=t.sent,r=n.errno,!r){t.next=6;break}throw new Error(n.message);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return new a["default"](function(r,u){e.query(t,n,function(e,t){return e?u(e):void r(t)})})};t["default"]=function(){var e=(0,f["default"])(o["default"].mark(function t(e){var n,r;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:return n=t.sent,r={release:function(){var e=(0,f["default"])(o["default"].mark(function t(){return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.release());case 1:case"end":return e.stop()}},t,void 0)}));return function(){return e.apply(this,arguments)}}(),execute:v.bind(void 0,n),commit:function(){var e=(0,f["default"])(o["default"].mark(function t(){return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n,l);case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}},t,void 0)}));return function(){return e.apply(this,arguments)}}(),rollback:function(){var e=(0,f["default"])(o["default"].mark(function t(){return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n,c);case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}},t,void 0)}));return function(){return e.apply(this,arguments)}}(),startTransaction:function(){var e=(0,f["default"])(o["default"].mark(function t(){return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n,s);case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}},t,void 0)}));return function(){return e.apply(this,arguments)}}()},t.abrupt("return",r);case 5:case"end":return t.stop()}},t,void 0)}));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),a=r(u),i=n(2),o="\n",d=function(e,t,n,r,u,o){var d=t.adds,f="",s="";return u&&(f=" NOT NULL"),void 0!==o&&(s=["boolean","number",""].indexOf("undefined"==typeof o?"undefined":(0,a["default"])(o))>-1?" DEFAULT "+String(o).toUpperCase():" DEFAULT '"+o+"'"),d.push("ADD COLUMN "+n+" "+(r===i.REFERENCES?i.INTEGER:r)+f+s),e},f=function(e,t,n){var r=t.drops;return r.push("DROP COLUMN "+n+" RESTRICT"),e},s=function(e,t,n){var r=t.alters;return r.push("ALTER COLUMN "+n+" DROP DEFAULT"),e},l=function(e,t,n,r){var u=t.alters,i="";return void 0!==r&&(i=["boolean","number",""].indexOf("undefined"==typeof r?"undefined":(0,a["default"])(r))>-1?""+String(r).toUpperCase():"'"+r+"'"),u.push("ALTER COLUMN "+n+" SET DEFAULT "+i),e},c=function(e){var t=e.tableName,n=e.adds,r=e.alters,u=e.drops,a=e.indexs;return("\nALTER TABLE "+t+" (\n  "+n.concat(r,u,a).join(","+o+"  ")+"\n);\n").trim()},p=function(e,t,n,r){var u=t.alters;return u.push("ALTER COLUMN "+n+" TYPE "+(r===i.REFERENCES?i.INTEGER:r)),e},v=function(e,t,n){var r=t.alters;return r.push("ALTER COLUMN "+n+" DROP NOT NULL"),e},b=function(e,t,n){var r=t.alters;return r.push("ALTER COLUMN "+n+" SET NOT NULL"),e},E=function(e,t,n,r){var u=t.alters;return u.push("RENAME COLUMN "+n+" TO "+r),e},m=function(e,t,n){var r=t.tableName,u=t.indexs;return u.push("ADD CONSTRAINT unique_"+r+"_"+n+" UNIQUE ("+n+")"),e},T=function(e,t,n){var r=t.tableName,u=t.indexs;return u.push("DROP CONSTRAINT unique_"+r+"_"+n),e},N=function(e,t,n,r,u){var a=t.tableName,i=t.indexs;return i.push("ADD CONSTRAINT foreign_"+a+"_"+n+" FOREIGN KEY ("+n+") REFERENCES "+r+" ("+(u?u:"id")+")"),e},R=function(e,t,n){var r=t.tableName,u=t.indexs;return u.push("DROP CONSTRAINT foreign_"+r+"_"+n),e};t["default"]=function(e){var t={tableName:e,adds:[],drops:[],alters:[],indexs:[]},n={};return n.toSQL=c.bind(void 0,t),n.setType=p.bind(void 0,n,t),n.addColumn=d.bind(void 0,n,t),n.addUnique=m.bind(void 0,n,t),n.dropUnique=T.bind(void 0,n,t),n.dropColumn=f.bind(void 0,n,t),n.setDefault=l.bind(void 0,n,t),n.setNotNull=b.bind(void 0,n,t),n.dropNotNull=v.bind(void 0,n,t),n.dropDefault=s.bind(void 0,n,t),n.renameColumn=E.bind(void 0,n,t),n.addForeign=N.bind(void 0,n,t),n.dropForeign=R.bind(void 0,n,t),n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),a=r(u),i=n(2),o="\n",d=function(e,t,n,r,u,o){var d=t.columns,f="",s="";return u&&(f=" NOT NULL"),void 0!==o&&(s=["boolean","number",""].indexOf("undefined"==typeof o?"undefined":(0,a["default"])(o))>-1?" DEFAULT "+String(o).toUpperCase():" DEFAULT '"+o+"'"),d.push(n+" "+(r===i.REFERENCES?i.INTEGER:r)+f+s),e},f=function(e,t,n){var r=t.tableName,u=t.uniques;return u.push("CONSTRAINT unique_"+r+"_"+n+" UNIQUE ("+n+")"),e},s=function(e,t,n,r,u){var a=t.tableName,i=t.foreigns;return i.push("CONSTRAINT foreign_"+a+"_"+n+" FOREIGN KEY ("+n+") REFERENCES "+r+" ("+(u?u:"id")+")"),e},l=function(e){var t=e.tableName,n=e.columns,r=e.uniques,u=e.foreigns;return("\nCREATE TABLE "+t+" (\n  "+n.concat(r,u).join(","+o+"  ")+"\n);\n").trim()};t["default"]=function(e){var t={tableName:e,columns:[],uniques:[],foreigns:[]},n={};return n.toSQL=l.bind(void 0,t),n.unique=f.bind(void 0,n,t),n.column=d.bind(void 0,n,t),n.foreign=s.bind(void 0,n,t),n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=r(u),i=n(3),o=r(i),d="\n",f=function(e){var t=e.schema,n=e.conditions,r=t.table,u=t.fields,i=n&&n.length?d+"WHERE ("+n.join(")"+d+"  AND (")+")":"";return("\nDELETE FROM "+r+i+"\nRETURNING "+(0,a["default"])(u).join(", ")+";\n").trim()},s=function(e,t){return e.values=[],e.conditions=(0,a["default"])(t||{}).map(function(n,r){var u=(0,o["default"])(t[n]),a=u.comparator,i=u.value;return e.values.push(i),n+" "+a+" $"+(r+1)}),e};t["default"]=function(e){var t={schema:e,values:[],conditions:[]};return t.toSQL=f.bind(void 0,t),t.objValues=s.bind(void 0,t),t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return("\nDROP TABLE "+e+";\n").trim()};t["default"]=function(e){var t={};return t.toSQL=n.bind(void 0,e),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=r(u),i=function(e){var t=e.schema,n=e.listFields,r=e.paramters,u=t.table,i=t.fields;return("\nINSERT INTO "+u+" ("+n.join(", ")+")\nVALUES ("+r.join(", ")+")\nRETURNING "+(0,a["default"])(i).join(", ")+";\n").trim()},o=function(e,t){var n=e.schema,r=n.fields;return e.listFields=(0,a["default"])(t).filter(function(e){return r.hasOwnProperty(e)&&void 0!==t[e]}),e.values=e.listFields.map(function(e){return t[e]}),e.paramters=e.listFields.map(function(e,t){return"$"+(t+1)}),e};t["default"]=function(e){var t={schema:e,values:{}};return t.toSQL=i.bind(void 0,t),t.objValues=o.bind(void 0,t),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=r(u),i=n(3),o=r(i),d="\n",f=function(e,t){return e.fields.push(t),e},s=function(e,t,n){return n||(n=""),e.order.push((t+" "+n.toUpperCase()).trim()),e},l=function(e,t){return e.group.push(t),e},c=function(e,t){return e.tableName=t,e},p=function(e,t){return e.limitRows=t,e},v=function(e,t){return e.conditions=(0,a["default"])(t||{}).map(function(n,r){var u=(0,o["default"])(t[n]),a=u.comparator,i=u.value;return e.values.push(i),n+" "+a+" $"+(r+1)}),e},b=function(e){var t=e.tableName,n=e.fields,r=e.order,u=e.group,a=e.conditions,i=e.limitRows,o=i?d+"LIMIT "+i:"",f=r&&r.length?d+"ORDER BY "+r.join(", "):"",s=u&&u.length?d+"GROUP BY "+u.join(", "):"",l=a&&a.length?d+"WHERE ("+a.join(")"+d+"  AND (")+")":"";return("\nSELECT "+n.join(", ")+"\nFROM "+t+l+s+f+o+"\n  ").trim()};t["default"]=function(){var e={tableName:"",fields:[],order:[],group:[],values:[]};return e.from=c.bind(void 0,e),e.field=f.bind(void 0,e),e.toSQL=b.bind(void 0,e),e.where=v.bind(void 0,e),e.limit=p.bind(void 0,e),e.orderBy=s.bind(void 0,e),e.groupBy=l.bind(void 0,e),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=r(u),i=n(3),o=r(i),d="\n",f=function(e){var t=e.schema,n=e.paramters,r=e.conditions,u=t.table,i=t.fields,o=r&&r.length?d+"WHERE ("+r.join(")"+d+"  AND (")+")":"";return("\nUPDATE "+u+" SET\n  "+n.join(","+d+"  ")+o+"\nRETURNING "+(0,a["default"])(i).join(", ")+";\n").trim()},s=function(e,t,n){var r=e.schema,u=r.fields,i=(0,a["default"])(t).filter(function(e){return u.hasOwnProperty(e)&&void 0!==t[e]});return e.values=i.map(function(e){return t[e]}),e.paramters=i.map(function(e,t){return e+" = $"+(t+1)}),e.conditions=(0,a["default"])(n||{}).map(function(t,r){var u=(0,o["default"])(n[t]),a=u.comparator,d=u.value;return e.values.push(d),t+" "+a+" $"+(i.length+r+1)}),e};t["default"]=function(e){var t={schema:e,values:[],conditions:[]};return t.toSQL=f.bind(void 0,t),t.objValues=s.bind(void 0,t),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),a=r(u),i=n(8),o=r(i),d=n(22),f=r(d),s=n(7),l=r(s),c=n(21),p=function(e,t,n){var r=JSON.parse((0,f["default"])(e[n])),u={schema:r};return u.select=l["default"].bind(void 0,t,r),u.insert=c.insertData.bind(void 0,e,t,r),u.update=c.updateData.bind(void 0,e,t,r),u},v=function(e,t){return p.bind(void 0,e,t)};t["default"]=function(e){var t={};return e.forEach(function(e){return(0,o["default"])(t,(0,a["default"])({},e.table,e))}),v.bind(void 0,t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateData=t.insertData=t.getObjRow=t.formatDate=void 0;var u=n(5),a=r(u),i=n(23),o=r(i),d=n(9),f=r(d),s=n(4),l=r(s),c=n(10),p=r(c),v=n(8),b=r(v),E=n(1),m=r(E),T=n(6),N=n(7),R=r(N),h=n(2),A=t.formatDate=function(e){var t=new Date(e),n=("0"+t.getDate()).substr(-2),r=("0"+(t.getMonth()+1)).substr(-2);return t.getFullYear()+"-"+r+"-"+n},O=t.getObjRow=function(e,t){var n={};return(0,m["default"])(e.fields).forEach(function(r){var u=t[r.toLowerCase()];e.fields[r]===h.DATE&&(u=A(u)),(0,b["default"])(n,(0,p["default"])({},r,u))}),n},_=function(){var e=(0,l["default"])(a["default"].mark(function t(e,n,r,u,i){var d,s=r.manyToMany;return a["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=u.id,t.abrupt("return",f["default"].all((0,m["default"])(s||{}).map(function(){var t=(0,l["default"])(a["default"].mark(function r(t){var c,v,E,T,N,h,A,O;return a["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c=i[t],c&&c.length){r.next=3;break}return r.abrupt("return");case 3:return v=s[t],E=v.table,T=v.primary,N=v.secondary,h=v.schema,A=v.extraFields,O=e[h],r.next=12,f["default"].all(c.map(function(t,r){var u=(0,o["default"])({},t);(0,m["default"])(A).forEach(function(e){return delete u[e]});var a=u.id;return a?M(e,n,O,u,{id:a}):C(e,n,O,u)}));case 12:return u[t]=r.sent,r.next=15,f["default"].all(c.map(function(){var r=(0,l["default"])(a["default"].mark(function i(r,o){var f,s,l,c,v,h,O,_;return a["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={},(0,m["default"])(A).forEach(function(e){return s[e]=r[e]}),l=u[t][o].id,s[T]=d,s[N]=l,c=R["default"].bind(void 0,n,e[E]),a.next=8,c("id").from("kinships").where((f={},(0,p["default"])(f,T,d),(0,p["default"])(f,N,l),f)).limit(1).run();case 8:if(v=a.sent,h=v.rows,O=h&&h.length?h.shift().id:void 0,!O){a.next=17;break}return a.next=14,M(e,n,e[E],s,{id:O});case 14:a.t0=a.sent,a.next=20;break;case 17:return a.next=19,C(e,n,e[E],s);case 19:a.t0=a.sent;case 20:_=a.t0,(0,m["default"])(A).forEach(function(e){return(0,b["default"])(u[t][o],(0,p["default"])({},e,_[e]))});case 22:case"end":return a.stop()}},i,void 0)}));return function(e,t){return r.apply(this,arguments)}}()));case 15:case"end":return r.stop()}},r,void 0)}));return function(e){return t.apply(this,arguments)}}())));case 2:case"end":return t.stop()}},t,void 0)}));return function(t,n,r,u,a){return e.apply(this,arguments)}}(),x=function(){var e=(0,l["default"])(a["default"].mark(function t(e,n,r,u,i){var d,s=r.hasMany;return a["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=u.id,t.next=3,f["default"].all((0,m["default"])(s||{}).map(function(){var t=(0,l["default"])(a["default"].mark(function r(t){var l,c,v,b,E;return a["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l=i[t],l&&l.length){r.next=3;break}return r.abrupt("return");case 3:return c=s[t],v=c.table,b=c.field,E=e[v],r.next=9,f["default"].all(l.map(function(t,r){var u=(0,o["default"])({},t,(0,p["default"])({},b,d)),a=u.id;return a?M(e,n,E,u,{id:a}):C(e,n,E,u)}));case 9:u[t]=r.sent;case 10:case"end":return r.stop()}},r,void 0)}));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}},t,void 0)}));return function(t,n,r,u,a){return e.apply(this,arguments)}}(),L=function(){var e=(0,l["default"])(a["default"].mark(function t(e,n,r,u,i){return a["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e,n,r,u,i);case 2:return t.next=4,_(e,n,r,u,i);case 4:return t.abrupt("return",u);case 5:case"end":return t.stop()}},t,void 0)}));return function(t,n,r,u,a){return e.apply(this,arguments)}}(),C=t.insertData=function(){var e=(0,l["default"])(a["default"].mark(function t(e,n,r,u){var i,o,d,f,s,l;return a["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,T.insertTable)(r).objValues(u),o=i.values,d=i.toSQL(),t.next=5,n.execute(d,o);case 5:return f=t.sent,s=f.rows,l=s.map(O.bind(void 0,r)).shift(),t.abrupt("return",L(e,n,r,l,u));case 9:case"end":return t.stop()}},t,void 0)}));return function(t,n,r,u){return e.apply(this,arguments)}}(),M=t.updateData=function(){var e=(0,l["default"])(a["default"].mark(function t(e,n,r,u,i){var o,d,f,s,l,c;return a["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,T.updateTable)(r).objValues(u,i),d=o.values,f=o.toSQL(),t.next=5,n.execute(f,d);case 5:return s=t.sent,l=s.rows,c=l.map(O.bind(void 0,r)).shift(),t.abrupt("return",L(e,n,r,c,u));case 9:case"end":return t.stop()}},t,void 0)}));return function(t,n,r,u,a){return e.apply(this,arguments)}}()},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t){e.exports=require("pg")}]);
//# sourceMappingURL=q-postgres.js.map